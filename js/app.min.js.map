{"version":3,"sources":["js/app.js"],"names":["Vector","x","y","this","make","a","b","size","Math","sqrt","normalize","l","incidence","angle","atan2","distance","cross","difference","prototype","towards","friction","add","copy","toString","Utils","getTouch","e","previous","t","type","touch","event","originalEvent","touches","length","changedTouches","pageX","pageY","s","getRelativeTouch","element","point","st","window","scrollY","pageYOffset","document","body","scrollTop","documentElement","rect","getBoundingClientRect","left","top","getClosest","el","selector","matchesFn","parent","some","fn","parentElement","indexOf","array","object","key","index","i","removeValue","value","splice","parseHour","duration","offset","seconds","parseInt","minutes","hours","parseTime","throttle","func","wait","options","context","args","result","timeout","later","leading","getNow","apply","now","remaining","arguments","clearTimeout","trailing","setTimeout","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","max","id","transformProperty","safariPropertyHack","div","createElement","style","every","prefix","undefined","Style","props","scale","hoverScale","currentScale","set","styles","push","cssText","join","transform","transformOrigin","round","Cookie","_set","name","days","date","setTime","expires","toGMTString","cookie","cache","json","JSON","stringify","console","log","get","cookieName","ca","split","c","charAt","substring","data","parse","on","checkCookie","elapsed","deferred","reject","resolve","interval","$q","defer","promise","LocalStorage","isLocalStorageSupported","supported","localStorage","setItem","removeItem","isSupported","storageEvent","newValue","addEventListener","attachEvent","app","angular","module","config","$httpProvider","$routeProvider","$locationProvider","when","state","title","templateUrl","controller","otherwise","html5Mode","run","$rootScope","$on","$scope","nextRoute","lastRoute","$$route","animation","$animate","isFirstView","currentRoute","isBackward","previousRoute","isForward","bezierOptions","dynamics","bezier","points","cp","current","enter","done","css","translateY","opacity","animate","w","offsetWidth","translateX","leave","directive","require","link","scope","attributes","model","validateType","$parsers","unshift","$setValidity","Number","String","$validators","required","$modelValue","label","forEach","obj","$watch","$validate","template","source","$parent","$eval","ngModel","number","item","has","addClass","$timeout","$sce","uid","restrict","valueTrue","valueFalse","labelTrue","labelFalse","change","isDisabled","input","querySelector","properties","attrs","isDefined","trust","trustAsHtml","SetSwitch","checked","isActive","onChange","oldValue","isFunction","$parse","replace","form","placeholder","formKey","formFocus","formBlur","formLeave","formEvents","readonly","control","match","onChanged","Boolean","all","canCreate","flatten","queryable","onSelected","rows","$window","MAX_ITEMS","service","getPhrase","Clear","phrase","items","count","val","Current","active","onTyping","Enter","onSelect","$apply","Up","Down","Parse","toLowerCase","NameA","substr","NameB","NameC","Filter","Search","setPhrase","then","success","error","onKeyDown","keyCode","preventDefault","onKeyUp","call","onUp","off","target","onBlur","addListeners","removeListeners","Init","init","find","maxItems","POSITIVE_INFINITY","onFocus","parsedItem","$item","$event","extend","$watchCollection","factory","$http","response","bind","Model","Models","APP","API","models","$location","isAuthorizedOrGoTo","redirect","auth","created_at","expires_in","status","path","isAuthorized","request","headers","Authorization","access_token","responseError","errors","Message","ModelState","httpError","$broadcast","signOut","$httpAsync","AuthInterceptorService","User","Users","_current","user","USER","getCurrentUser","DataFilter","getSearchParams","search","p","getParams","infinite","post","page","DataSource","busy","maxPages","filters","url","uri","paging","pages","pagination","getPages","flush","PAGES_MAX","opened","responseHeader","responseView","params","refresh","more","filter","prevPage","nextPage","gotoPage","firstPage","lastPage","hasMany","hasMorePagesBehind","startingIndex","hasMorePagesNext","endingIndex","isPage","hasPages","min","openClose","IndexedDataFilter","page_index","page_size","IndexedDataSource","ceil","list","Collection","TabsProvider","isIndex","setIndex","isValue","setValue","indexOfValue","stringOfValues","_values","collection","Object","create","Array","constructor","inject","method","hasOwnProperty","__extend","fromArray","isArray","stringValue","addAll","ExtensibleObject","TIMEOUT","WebWorker","src","self","callbacks","worker","Worker","onmessage","isWebWorkerSupported","transformResponse","d","h","eval","o","postMessage","wrap","getDefaults","isSuccess","createMap","isString","parseHeaders","fillInParsed","parsed","j","line","lowercase","trim","isObject","headersGetter","headersObj","defaults","withCredentials","responseType","common","string","head","put","patch","getter","statusText","$route","Config"],"mappings":"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","file":"js/app.min.js","sourcesContent":["\r\nvar Vector = function () {\r\n    function Vector(x, y) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n    Vector.make = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.size = function (a) {\r\n        return Math.sqrt(a.x * a.x + a.y * a.y);\r\n    };\r\n    Vector.normalize = function (a) {\r\n        var l = Vector.size(a);\r\n        a.x /= l;\r\n        a.y /= l;\r\n        return a;\r\n    };\r\n    Vector.incidence = function (a, b) {\r\n        var angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\r\n        // if (angle < 0) angle += 2 * Math.PI;\r\n        // angle = Math.min(angle, (Math.PI * 2 - angle));\r\n        return angle;\r\n    };\r\n    Vector.distance = function (a, b) {\r\n        return Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\r\n    };\r\n    Vector.cross = function (a, b) {\r\n        return (a.x * b.y) - (a.y * b.x);\r\n    };\r\n    Vector.difference = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.prototype = {\r\n        size: function () {\r\n            return Vector.size(this);\r\n        },\r\n        normalize: function () {\r\n            return Vector.normalize(this);\r\n        },\r\n        incidence: function (b) {\r\n            return Vector.incidence(this, b);\r\n        },\r\n        cross: function (b) {\r\n            return Vector.cross(this, b);\r\n        },\r\n        towards: function (b, friction) {\r\n            friction = friction || 0.125;\r\n            this.x += (b.x - this.x) * friction;\r\n            this.y += (b.y - this.y) * friction;\r\n            return this;\r\n        },\r\n        add: function (b) {\r\n            this.x += b.x;\r\n            this.y += b.y;\r\n            return this;\r\n        },\r\n        friction: function (b) {\r\n            this.x *= b;\r\n            this.y *= b;\r\n            return this;\r\n        },\r\n        copy: function (b) {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        toString: function () {\r\n            return '{' + this.x + ',' + this.y + '}';\r\n        },\r\n    };\r\n    return Vector;\r\n}();\r\n\r\nvar Utils = function () {\r\n\r\n    (function () {\r\n        var lastTime = 0;\r\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\r\n                                       || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n        }\r\n        if (!window.requestAnimationFrame) {\r\n            window.requestAnimationFrame = function (callback, element) {\r\n                var currTime = new Date().getTime();\r\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                var id = window.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n        if (!window.cancelAnimationFrame) {\r\n            window.cancelAnimationFrame = function (id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n\r\n    var transformProperty = function detectTransformProperty() {\r\n        var transformProperty = 'transform',\r\n            safariPropertyHack = 'webkitTransform';\r\n        var div = document.createElement(\"DIV\");\r\n        if (typeof div.style[transformProperty] !== 'undefined') {\r\n            ['webkit', 'moz', 'o', 'ms'].every(function (prefix) {\r\n                var e = '-' + prefix + '-transform';\r\n                if (typeof div.style[e] !== 'undefined') {\r\n                    transformProperty = e;\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n        } else if (typeof div.style[safariPropertyHack] !== 'undefined') {\r\n            transformProperty = '-webkit-transform';\r\n        } else {\r\n            transformProperty = undefined;\r\n        }\r\n        return transformProperty;\r\n    }();\r\n\r\n    function getTouch(e, previous) {\r\n        var t = new Vector();\r\n        if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\r\n            var touch = null;\r\n            var event = e.originalEvent ? e.originalEvent : e;\r\n            // event.stopImmediatePropagation();            \r\n            // event.currentTarget.removeEventListener('mousedown mousemove mouseup');\r\n            var touches = event.touches.length ? event.touches : event.changedTouches;\r\n            if (touches && touches.length) {\r\n                touch = touches[0];\r\n            }\r\n            if (touch) {\r\n                t.x = touch.pageX;\r\n                t.y = touch.pageY;\r\n            }\r\n        } else if (e.type == 'click' || e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\r\n            t.x = e.pageX;\r\n            t.y = e.pageY;\r\n        }\r\n        if (previous) {\r\n            t.s = Vector.difference(previous, t);\r\n        }\r\n        t.type = e.type;\r\n        return t;\r\n    }\r\n\r\n    function getRelativeTouch(element, point) {\r\n        var st = window.scrollY || window.pageYOffset || document.body.scrollTop + (document.documentElement && document.documentElement.scrollTop || 0);\r\n        var rect = element[0].getBoundingClientRect();\r\n        var e = new Vector(rect.left, rect.top + st);\r\n        return Vector.difference(e, point);\r\n    }\r\n\r\n    function getClosest(el, selector) {\r\n        var matchesFn, parent;\r\n        ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\r\n            if (typeof document.body[fn] == 'function') {\r\n                matchesFn = fn;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent[matchesFn](selector)) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    function indexOf(array, object, key) {\r\n        key = key || 'id';\r\n        var index = -1;\r\n        if (array) {\r\n            var i = 0, t = array.length;\r\n            while (i < t) {\r\n                if (array[i] && array[i][key] === object[key]) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n\r\n    function removeValue(array, value) {\r\n        var index = -1;\r\n        if (array) {\r\n            var i = 0, t = array.length;\r\n            while (i < t) {\r\n                if (array[i] === value) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n        }\r\n        if (index !== -1) {\r\n            array.splice(index, 1);\r\n            return value;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    function parseHour(duration, offset) {\r\n        offset = offset || 0;\r\n        duration = duration - offset * 60 * 1000;\r\n        var milliseconds = parseInt((duration % 1000) / 100)\r\n            , seconds = parseInt((duration / 1000) % 60)\r\n            , minutes = parseInt((duration / (1000 * 60)) % 60)\r\n            , hours = parseInt((duration / (1000 * 60 * 60)) % 24);\r\n\r\n        var hours = (hours < 10) ? \"0\" + hours : hours;\r\n        var minutes = (minutes < 10) ? \"0\" + minutes : minutes;\r\n        var seconds = (seconds < 10) ? \"0\" + seconds : seconds;\r\n        return hours + ':' + minutes + ':' + seconds; // + \".\" + milliseconds;\r\n    }\r\n\r\n    function parseTime(duration, offset) {\r\n        offset = offset || 0;\r\n        duration = duration - offset * 60 * 1000;\r\n        var milliseconds = parseInt((duration % 1000) / 100)\r\n            , seconds = parseInt((duration / 1000) % 60)\r\n            , minutes = parseInt((duration / (1000 * 60)) % 60)\r\n            , hours = parseInt((duration / (1000 * 60 * 60)) % 24);\r\n\r\n        return (hours ? hours + 'h ' : '') + (minutes ? minutes + '\\' ' : '') + (seconds ? seconds + '\\'\\' ' : ''); // + \".\" + milliseconds;\r\n    }\r\n\r\n    var getNow = Date.now || function () {\r\n        return new Date().getTime();\r\n    };\r\n\r\n    function throttle(func, wait, options) {\r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        var context, args, result;\r\n        var timeout = null;\r\n        var previous = 0;\r\n        if (!options) options = {};\r\n        var later = function () {\r\n            previous = options.leading === false ? 0 : getNow();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        };\r\n        return function () {\r\n            var now = getNow();\r\n            if (!previous && options.leading === false) previous = now;\r\n            var remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n                timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n\r\n    var Style = function () {\r\n        function Style() {\r\n            this.props = {\r\n                scale: 1,\r\n                hoverScale: 1,\r\n                currentScale: 1,\r\n            }\r\n        }\r\n        Style.prototype = {\r\n            set: function (element) {\r\n                var styles = [];\r\n                for (var key in this) {\r\n                    if (key !== 'props') {\r\n                        styles.push(key + ':' + this[key]);\r\n                    }\r\n                }\r\n                element.style.cssText = styles.join(';') + ';';\r\n            },\r\n            transform: function (transform) {\r\n                this[Utils.transformProperty] = transform;\r\n            },\r\n            transformOrigin: function (x, y) {\r\n                this[Utils.transformProperty + '-origin-x'] = (Math.round(x * 1000) / 1000) + '%';\r\n                this[Utils.transformProperty + '-origin-y'] = (Math.round(y * 1000) / 1000) + '%';\r\n            },\r\n        };\r\n        return Style;\r\n    }();\r\n\r\n    var Cookie = function () {\r\n        function Cookie() {\r\n        }\r\n\r\n        Cookie._set = function (name, value, days) {\r\n            if (days) {\r\n                var date = new Date();\r\n                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n                var expires = \"; expires=\" + date.toGMTString();\r\n            } else {\r\n                var expires = \"\";\r\n            }\r\n            window.document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n        }\r\n\r\n        Cookie.set = function (name, value, days) {\r\n            try {\r\n                var cache = [];\r\n                var json = JSON.stringify(value, function (key, value) {\r\n                    if (key === 'pool') {\r\n                        return;\r\n                    }\r\n                    if (typeof value === 'object' && value !== null) {\r\n                        if (cache.indexOf(value) !== -1) {\r\n                            // Circular reference found, discard key\r\n                            return;\r\n                        }\r\n                        cache.push(value);\r\n                    }\r\n                    return value;\r\n                });\r\n                cache = null;\r\n                Cookie._set(name, json, days);\r\n            } catch (e) {\r\n                console.log('Cookie.set.error serializing', name, value, e);\r\n            }\r\n        };\r\n\r\n        Cookie.get = function (name) {\r\n            var cookieName = name + \"=\";\r\n            var ca = window.document.cookie.split(';');\r\n            for (var i = 0; i < ca.length; i++) {\r\n                var c = ca[i];\r\n                while (c.charAt(0) == ' ') {\r\n                    c = c.substring(1, c.length);\r\n                }\r\n                if (c.indexOf(cookieName) == 0) {\r\n                    var value = c.substring(cookieName.length, c.length);\r\n                    var data = null;\r\n                    try {\r\n                        data = JSON.parse(value);\r\n                    } catch (e) {\r\n                        console.log('Cookie.get.error parsing', key, e);\r\n                    };\r\n                    return data;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n\r\n        Cookie.delete = function (name) {\r\n            Cookie._set(name, \"\", -1);\r\n        };\r\n\r\n        Cookie.on = function (name) {\r\n            var deferred = $q.defer();\r\n            var i, interval = 1000, elapsed = 0, timeout = 60 * 1000;\r\n            function checkCookie() {\r\n                if (elapsed > timeout) {\r\n                    deferred.reject('timeout');\r\n                } else {\r\n                    var c = Cookie.get(name);\r\n                    if (c) {\r\n                        deferred.resolve(c);\r\n                    } else {\r\n                        elapsed += interval;\r\n                        i = setTimeout(checkCookie, interval);\r\n                    }\r\n                }\r\n            }\r\n            checkCookie();\r\n            return deferred.promise;\r\n        };\r\n\r\n        return Cookie;\r\n    }();\r\n\r\n    var LocalStorage = function () {\r\n        function LocalStorage() {\r\n        }\r\n\r\n        function isLocalStorageSupported() {\r\n            var supported = false;\r\n            try {\r\n                supported = 'localStorage' in window && window['localStorage'] !== null;\r\n                if (supported) {\r\n                    window.localStorage.setItem('test', '1');\r\n                    window.localStorage.removeItem('test');\r\n                } else {\r\n                    supported = false;\r\n                }\r\n            } catch (e) {\r\n                supported = false;\r\n            }\r\n            return supported;\r\n        }\r\n        LocalStorage.isSupported = isLocalStorageSupported();\r\n\r\n        if (LocalStorage.isSupported) {\r\n            LocalStorage.set = function (name, value) {\r\n                try {\r\n                    var cache = [];\r\n                    var json = JSON.stringify(value, function (key, value) {\r\n                        if (key === 'pool') {\r\n                            return;\r\n                        }\r\n                        if (typeof value === 'object' && value !== null) {\r\n                            if (cache.indexOf(value) !== -1) {\r\n                                // Circular reference found, discard key\r\n                                return;\r\n                            }\r\n                            cache.push(value);\r\n                        }\r\n                        return value;\r\n                    });\r\n                    cache = null;\r\n                    window.localStorage.setItem(name, json);\r\n                } catch (e) {\r\n                    console.log('LocalStorage.set.error serializing', name, value, e);\r\n                }\r\n            };\r\n\r\n            LocalStorage.get = function (name) {\r\n                var value = null;\r\n                if (window.localStorage[name] !== undefined) {\r\n                    try {\r\n                        value = JSON.parse(window.localStorage[name]);\r\n                    } catch (e) {\r\n                        console.log('LocalStorage.get.error parsing', name, e);\r\n                    }\r\n                }\r\n                return value;\r\n            };\r\n\r\n            LocalStorage.delete = function (name) {\r\n                window.localStorage.removeItem(name);\r\n            };\r\n\r\n            LocalStorage.on = function (name) {\r\n                var deferred = $q.defer();\r\n                var i, timeout = 60 * 1000;\r\n                function storageEvent(e) {\r\n                    // console.log('LocalStorage.on', name, e);\r\n                    clearTimeout(i);\r\n                    if (e.originalEvent.key == name) {\r\n                        try {\r\n                            var value = JSON.parse(e.originalEvent.newValue); // , e.originalEvent.oldValue\r\n                            deferred.resolve(value);\r\n                        } catch (e) {\r\n                            console.log('LocalStorage.on.error parsing', name, e);\r\n                            deferred.reject('error parsing ' + name);\r\n                        }\r\n                    }\r\n                }\r\n                if (window.addEventListener) {\r\n                    window.addEventListener('storage', storageEvent, false);\r\n                } else {\r\n                    window.attachEvent('onstorage', storageEvent);\r\n                }\r\n                i = setTimeout(function () {\r\n                    deferred.reject('timeout');\r\n                }, timeout);\r\n                return deferred.promise;\r\n            };\r\n\r\n        } else {\r\n            console.log('LocalStorage.unsupported switching to cookies');\r\n            LocalStorage.set = Cookie.set;\r\n            LocalStorage.get = Cookie.get;\r\n            LocalStorage.delete = Cookie.delete;\r\n            LocalStorage.on = Cookie.on;\r\n\r\n        }\r\n\r\n        return LocalStorage;\r\n    }();\r\n\r\n    function Utils() {\r\n\r\n    }\r\n\r\n    Utils.transformProperty = transformProperty;\r\n    Utils.getTouch = getTouch;\r\n    Utils.getRelativeTouch = getRelativeTouch;\r\n    Utils.getClosest = getClosest;\r\n    Utils.indexOf = indexOf;\r\n    Utils.removeValue = removeValue;\r\n    Utils.parseHour = parseHour;\r\n    Utils.parseTime = parseTime;\r\n    Utils.throttle = throttle;\r\n    Utils.Style = Style;\r\n    Utils.LocalStorage = LocalStorage;\r\n    Utils.Cookie = Cookie;\r\n\r\n    return Utils;\r\n\r\n}();\n/*global angular */\r\n\r\nvar app = angular.module('app', ['ngRoute']);\r\n\r\napp.config(['$httpProvider', '$routeProvider', '$locationProvider', function ($httpProvider, $routeProvider, $locationProvider) {\r\n\r\n    $routeProvider.when('/', {\r\n        state: 'home',\r\n        title: 'Home',\r\n        templateUrl: 'partial/home',\r\n        controller: 'HomeCtrl',\r\n\r\n    }).when('/about', {\r\n        state: 'about',\r\n        title: 'About',\r\n        templateUrl: 'partial/about',\r\n        controller: 'AboutCtrl',\r\n\r\n    }).when('/contact', {\r\n        state: 'contact',\r\n        title: 'Contact',\r\n        templateUrl: 'partial/contact',\r\n        controller: 'ContactCtrl',\r\n    });\r\n\r\n    $routeProvider.otherwise('/');\r\n    \r\n    // HTML5 MODE url writing method (false: #/anchor/use, true: /html5/url/use)\r\n    $locationProvider.html5Mode(true);\r\n\r\n}]);\r\n\r\napp.run(['$rootScope', function ($rootScope) {\r\n\r\n    $rootScope.$on(\"$routeChangeSuccess\", function ($scope, nextRoute, lastRoute) {\r\n        console.log(\"$routeChangeSuccess\", nextRoute.$$route.state);\r\n        setTimeout(function () {\r\n            if (document.body.scrollTop !== undefined) {\r\n                document.body.scrollTop = 0;\r\n            } else {\r\n                document.documentElement.scrollTop = 0;\r\n            }\r\n        }, 100);\r\n    });\r\n\r\n}]);\r\n\n\r\napp.animation('.navigation-animation', function($rootScope, $animate) {       \r\n    var previousRoute = null;\r\n    var currentRoute = null;    \r\n    var bezierOptions = {\r\n        type: dynamics.bezier,\r\n        points: [{x:0,y:0,cp:[{x:0.509,y:0.007}]},{x:1,y:1,cp:[{x:0.566,y:0.997}]}],\r\n        duration : 500,\r\n    }    \r\n    $rootScope.$on('$routeChangeSuccess', function(event, current, previous) {\r\n        previousRoute = previous.$$route;\r\n        currentRoute = current.$$route;\r\n    });   \r\n    function isFirstView() {\r\n        return !currentRoute;\r\n    }    \r\n    function isBackward() {\r\n        return previousRoute.isForward;\r\n    }    \r\n    return {\r\n        enter: function(element, done) {                        \r\n            if (isFirstView()) {\r\n                // FIRST ENTERING ANIMATION\r\n                dynamics.css(element[0], {\r\n                    translateY: 0,\r\n                    opacity: 0,\r\n                    scale: 1.2,\r\n                });\r\n                dynamics.animate(element[0], {\r\n                    translateY: 0,\r\n                    opacity: 1,\r\n                    scale: 1,\r\n                }, bezierOptions);            \r\n            } else if (isBackward()) {\r\n                // BACKWARD ENTERING ANIMATION\r\n                var w = element[0].offsetWidth;\r\n                dynamics.css(element[0], {\r\n                    translateX: -w\r\n                });\r\n                dynamics.animate(element[0], {\r\n                    translateX: 0\r\n                }, bezierOptions); \r\n            } else {\r\n                // FORWARD ENTERING ANIMATION\r\n                var w = element[0].offsetWidth;\r\n                dynamics.css(element[0], {\r\n                    translateX: w\r\n                });\r\n                dynamics.animate(element[0], {\r\n                    translateX: 0\r\n                }, bezierOptions); \r\n            }\r\n            done();\r\n        },    \r\n        leave: function(element, done) {\r\n            if (isBackward()) {\r\n                // BACKWARD EXITING ANIMATION\r\n                var w = element[0].offsetWidth;\r\n                dynamics.css(element[0], {\r\n                    translateX: 0\r\n                });\r\n                dynamics.animate(element[0], {\r\n                    translateX: w\r\n                }, bezierOptions); \r\n            } else {\r\n                // FORWARD EXITING ANIMATION\r\n                var w = element[0].offsetWidth;\r\n                dynamics.css(element[0], {\r\n                    translateX: 0\r\n                });\r\n                dynamics.animate(element[0], {\r\n                    translateX: -w\r\n                }, bezierOptions); \r\n            }\r\n            setTimeout(done, 1000);\r\n        }\r\n    }\r\n});\r\n\n/*global angular,dynamics */\r\n\r\napp.directive('validateType', function () {\r\n    return {\r\n        require: 'ngModel',\r\n        link: function (scope, element, attributes, model) {\r\n            var type = attributes.validateType;\r\n            // console.log('validateType', type, model.$parsers, model);\r\n            switch (type) {\r\n                case 'number':\r\n                    model.$parsers.unshift(function (value) {\r\n                        // console.log('validateType', type, value, Number(value).toString() == String(value), angular.isNumber(Number(value)));\r\n                        model.$setValidity(type, Number(value).toString() == String(value));\r\n                        return value;\r\n                    });\r\n                    break;\r\n                case 'array':\r\n                    // model.$validators.required ? delete model.$validators.required : null;\r\n                    model.$validators.required = function () {\r\n                        // console.log('required', model.$modelValue);\r\n                        var array = model.$modelValue;\r\n                        if (!array) {\r\n                            return false;\r\n                        }\r\n                        var label = (attributes.label !== undefined) ? attributes.label : 'name';\r\n                        var value = '';\r\n                        angular.forEach(array, function (obj, i) {\r\n                            value += (i > 0 ? ', ' : '') + obj[label];\r\n                        })\r\n                        element[0].value = value;\r\n                        return array.length > 0;\r\n                    };\r\n                    scope.$watch(function () {\r\n                        return model.$modelValue && model.$modelValue.length;\r\n                    }, function () {\r\n                        model.$validate(); // validate again when array changes\r\n                    });\r\n                    /*\r\n                    model.$parsers.unshift(function (value) {\r\n                        console.log('validateType', type, value);\r\n                        model.$setValidity(type, value.length > 0);\r\n                        return value;\r\n                    });\r\n                    */\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n});\r\n\r\napp.directive('controlMultipleSelect', [function () {\r\n    return {\r\n        require: 'ngModel',\r\n        template: '<ul><li ng-repeat=\"item in source track by $index\" ng-click=\"add($index)\" ng-class=\"{ active: has($index) }\"><span ng-bind=\"item[label]\"></span></li></ul>',\r\n        scope: {\r\n            source: '=controlMultipleSelect',\r\n            label: '@',\r\n            key: '@',\r\n        },\r\n        link: function (scope, element, attributes, controller) {\r\n            scope.add = function (index) {\r\n                var model = scope.$parent.$eval(attributes.ngModel);\r\n                if (model) {\r\n                    var indexOf = scope.indexOf(index);\r\n                    if (indexOf !== -1) {\r\n                        model.splice(indexOf, 1);\r\n                    } else {\r\n                        if (attributes.number === 'true') {\r\n                            model.push(scope.source[index][scope.key]);\r\n                        } else {\r\n                            model.push(scope.source[index]);\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n            scope.indexOf = function (index) {\r\n                var indexOf = -1;\r\n                var model = scope.$parent.$eval(attributes.ngModel);\r\n                if (model) {\r\n                    angular.forEach(model, function (item, i) {\r\n                        if (attributes.number === 'true') {\r\n                            if (item === scope.source[index][scope.key]) {\r\n                                indexOf = i;\r\n                            }\r\n                        } else if (item[scope.key] === scope.source[index][scope.key]) {\r\n                            indexOf = i;\r\n                        }\r\n                    });\r\n                }\r\n                return indexOf;\r\n            }\r\n            scope.has = function (index) {\r\n                var indexOf = scope.indexOf(index);\r\n                return indexOf !== -1;\r\n            }\r\n            element.on('click', function () {\r\n                element.addClass('active');\r\n            })\r\n        }\r\n    };\r\n}]);\r\n\r\napp.directive('switcher', ['$timeout', '$sce', function ($timeout, $sce) {\r\n    var uid = 0;\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        require: 'ngModel',\r\n        scope: {\r\n            model: '=ngModel',\r\n            valueTrue: '=?',\r\n            valueFalse: '=?',\r\n            labelTrue: '@?',\r\n            labelFalse: '@?',\r\n            change: '=?ngChange',\r\n            isDisabled: '=?ngDisabled',\r\n        },\r\n        template: function (element, attributes) {\r\n            var name = attributes.name || 'switcher' + (++uid);\r\n            return '<div class=\"switcher\" ng-class=\"{ active: isActive, disabled: isDisabled }\">' +\r\n                    '   <span class=\"switcher-label false\" ng-bind-html=\"trust(labelFalse)\" ng-click=\"SetSwitch(false)\"></span>' +\r\n                    '   <label class=\"switcher-line\">' +\r\n                    '       <input id=\"' + name + '\" name=\"' + name + '\" type=\"checkbox\" ng-model=\"isActive\" ng-disabled=\"isDisabled\" ng-change=\"onChange()\">' +\r\n                    '   </label>' +\r\n                    '   <span class=\"switcher-label true\" ng-bind-html=\"trust(labelTrue)\" ng-click=\"SetSwitch(true)\"></span>' +\r\n                    '</div>';\r\n        },\r\n        link: function (scope, element, attributes, controller) {\r\n\r\n            var input = element[0].querySelector('input');\r\n\r\n            var properties = {\r\n                valueTrue: true,\r\n                valueFalse: false,\r\n                isDisabled: false,\r\n            };\r\n\r\n            var attrs = {\r\n                labelTrue: 'On',\r\n                labelFalse: 'Off',\r\n            };\r\n\r\n            angular.forEach(properties, function (value, key) {\r\n                if (!angular.isDefined(scope[key])) {\r\n                    scope[key] = value;\r\n                }\r\n            });\r\n\r\n            angular.forEach(attrs, function (value, key) {\r\n                if (!angular.isDefined(scope[key])) {\r\n                    attributes[key] = value;\r\n                }\r\n            });\r\n\r\n            scope.trust = function (value) {\r\n                return $sce.trustAsHtml(value);\r\n            };\r\n\r\n            scope.SetSwitch = function (value) {\r\n                console.log('switcher.set', value);\r\n                if (scope.isDisabled || input.checked == value) {\r\n                    return;\r\n                }\r\n                scope.isActive = input.checked = value;\r\n                scope.onChange();\r\n            };\r\n\r\n            scope.onChange = function () {\r\n                console.log('switcher.onChange', input.checked, scope.change);\r\n                var oldValue = scope.model;\r\n                var newValue = input.checked ? scope.valueTrue : scope.valueFalse; // scope.isActive\r\n                scope.model = newValue;\r\n                if (angular.isFunction(scope.change)) {\r\n                    $timeout(function () {\r\n                        scope.change(newValue, oldValue);\r\n                    });\r\n                }\r\n            };\r\n\r\n            scope.$watch('model', function (newValue) {\r\n                console.log('switcher.model', newValue);\r\n                scope.isActive = (newValue == scope.valueTrue);\r\n                if (input.checked !== scope.isActive) {\r\n                    input.checked = scope.isActive;\r\n                }\r\n            });\r\n\r\n            /*\r\n            scope.$watch('isActive', function (newValue) {\r\n                console.log('switcher.isActive', newValue);\r\n                scope.model = scope[scope.isActive + 'Value'];\r\n            });\r\n            */\r\n        },\r\n    };\r\n\r\n}]);\r\n\r\napp.directive('control', ['$parse', function ($parse) {\r\n    var uid = 0;\r\n    return {\r\n        restrict: 'A',\r\n        replace: true,\r\n        template: function (element, attributes) {\r\n            var form = attributes.form || 'Form';\r\n            var title = attributes.title || 'Untitled';\r\n            var placeholder = attributes.placeholder || title;\r\n            var name = title.replace(/[^0-9a-zA-Z]/g, \"\").split(' ').join('') + (++uid);\r\n            var formKey = form + '.' + name;\r\n            var formFocus = ' ng-focus=\"' + formKey + '.hasFocus=true\"';\r\n            var formBlur = ' ng-blur=\"' + formKey + '.hasFocus=false\"';\r\n            var formLeave = ' ng-mouseleave=\"' + formKey + '.hasFocus=false\"';\r\n            var formEvents = formFocus + formBlur;\r\n            var required = '';\r\n            var label = (attributes.label ? attributes.label : 'name');\r\n            var key = (attributes.key ? attributes.key : 'id');\r\n            var model = attributes.model;\r\n            if (attributes.required) {\r\n                required = '<span ng-messages=\"' + (attributes.readonly ? '' : '(' + form + '.$submitted || ' + formKey + '.$touched) && ') + form + '.' + name + '.$error\" role=\"alert\"><span ng-message=\"required\" class=\"label-error animated flash\"> &larr; required</span>';\r\n                switch (attributes.control) {\r\n                    case 'password':\r\n                        required = required + '<span ng-message=\"minlength\" class=\"label-error animated flash\"> &larr; at least 6 chars</span>';\r\n                        break;\r\n                    case 'email':\r\n                        required = required + '<span ng-message=\"email\" class=\"label-error animated flash\"> &larr; incorrect</span>';\r\n                        break;\r\n                    case 'number':\r\n                        required = required + '<span ng-message=\"number\" class=\"label-error animated flash\"> &larr; enter a valid number</span>';\r\n                        break;\r\n                }\r\n                if (attributes.match !== undefined) {\r\n                    required = required + '<span ng-message=\"match\" class=\"label-error animated flash\"> &larr; not matching</span>';\r\n                }\r\n                required = required + '</span>';\r\n            } else {\r\n                required = attributes.control !== 'switch' ? ' (optional)' : '';\r\n            }\r\n            var template = '<div ' + (attributes.readonly ? ' class=\"readonly\" ' : '') + ' ng-class=\"{ focus: ' + formKey + '.hasFocus, success: ' + formKey + '.$valid, error: ' + formKey + '.$invalid && (form.$submitted || ' + formKey + '.$touched), empty: !' + formKey + '.$viewValue }\"><label for=\"' + name + '\" class=\"control-label\">' + title + required + '</label>';\r\n            switch (attributes.control) {\r\n                case 'switch':\r\n                    template += '<div class=\"switcher\" switcher name=\"' + name + '\" ng-model=\"' + model + '\" value-true=\"' + attributes.value + '\" label-true=\"\" label-false=\"\"' + (attributes.onChanged ? ' ng-change=\"' + attributes.onChanged + '\"' : '') + '></switcher>';\r\n                    return template;\r\n                    break;\r\n                case 'checkbox':\r\n                    template = '<div class=\"checkbox\">';\r\n                    template += '<span class=\"checkbox-label\">' + title + required + '</span>';\r\n                    template += '<span class=\"switch\"><input id=\"' + name + '\" name=\"' + name + '\" type=\"checkbox\" ng-model=\"' + model + '\" ' + (attributes.required ? 'required=\"true\"' : '') + ' class=\"toggle toggle-round-flat\"><label for=\"' + name + '\"></label></span>';\r\n                    template += '</div>';\r\n                    break;\r\n                case 'select':\r\n                    var options = attributes.number\r\n                        ? 'item.' + key + ' as item.' + label + ' for item in ' + attributes.source\r\n                        : 'item.' + label + ' for item in ' + attributes.source + ' track by item.' + key;\r\n                    template += '<select name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\" ng-options=\"' + options + '\" ' + (attributes.number ? 'convert-to-number' : '') + ' ' + (attributes.required ? 'required=\"true\"' : '') + '><option value=\"\" disabled selected hidden>' + placeholder + '</option></select>';\r\n                    break;\r\n                case 'multiple-select':\r\n                    /*\r\n                    var options = attributes.number\r\n                        ? 'item.' + key + ' as item.' + label + ' for item in ' + attributes.source\r\n                        : 'item.' + label + ' for item in ' + attributes.source + ' track by item.' + key;\r\n                    template += '<select name=\"' + name + '\" class=\"form-control multiple\" ng-model=\"' + model + '\" ng-options=\"' + options + '\" ' + (attributes.number ? 'convert-to-number' : '') + ' ' + (attributes.required ? 'required=\"true\"' : '') + ' multiple=\"true\"><option value=\"\" disabled selected hidden>' + placeholder + '</option></select>';\r\n                    */\r\n                    var value = attributes.number ? 'item.' + key : 'item';\r\n                    var options = attributes.number\r\n                        ? 'item.' + key + ' as item.' + label + ' for item in ' + attributes.source\r\n                        : 'item.' + label + ' for item in ' + attributes.source + ' track by item.' + key;\r\n                    // template += '<select name=\"' + name + '\" class=\"form-control multiple\" ng-model=\"' + model + '\" ng-options=\"' + options + '\" ' + (attributes.number ? 'convert-to-number' : '') + ' ' + (attributes.required ? 'required=\"true\"' : '') + ' multiple=\"true\"><option value=\"\" disabled selected hidden>' + placeholder + '</option></select>';                    \r\n                    template += '<div ' + formLeave + '>';\r\n                    template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\" validate-type=\"array\" placeholder=\"' + placeholder + '\" type=\"data\" readonly ' + formFocus + '>';\r\n                    template += '<div control-multiple-select=\"' + attributes.source + '\" ng-model=\"' + model + '\" label=\"' + label + '\" key=\"' + key + '\" number=\"' + Boolean(attributes.number) + '\" ' + (attributes.all ? 'all=\"true\"' : '') + '></div>';\r\n                    template += '</div>';\r\n                    break;\r\n                case 'autocomplete':\r\n                    var canCreate = (attributes.canCreate ? attributes.canCreate : false);\r\n                    var flatten = (attributes.flatten ? attributes.flatten : false);\r\n                    var queryable = (attributes.queryable ? attributes.queryable : false);\r\n                    var onSelected = (attributes.onSelected ? ' on-selected=\"' + attributes.onSelected + '\"' : '');\r\n                    template += '<input name=\"' + name + '\" ng-model=\"' + model + '\" type=\"hidden\" ' + (attributes.required ? 'required' : '') + '>';\r\n                    template += '<div control-autocomplete=\"' + attributes.source + '\" model=\"' + model + '\" label=\"' + label + '\"  key=\"' + key + '\" can-create=\"' + canCreate + '\" flatten=\"' + flatten + '\" queryable=\"' + queryable + '\" placeholder=\"' + placeholder + '\" on-focus=\"' + formKey + '.hasFocus=true\" on-blur=\"' + formKey + '.hasFocus=false\"' + onSelected + '></div>';\r\n                    break;\r\n                case 'textarea':\r\n                    template += '<textarea name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" ' + (attributes.required ? 'required' : '') + ' rows=\"' + (attributes.rows ? attributes.rows : '1') + '\"' + formEvents + '></textarea>';\r\n                    break;\r\n                case 'datetime-local':\r\n                    placeholder == title ? placeholder = 'yyyy-MM-ddTHH:mm:ss' : null;\r\n                    // placeholder=\"yyyy-MM-ddTHH:mm:ss\" min=\"2001-01-01T00:00:00\" max=\"2013-12-31T00:00:00\" \r\n                    template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"datetime-local\"' + (attributes.required ? ' required' : '') + (attributes.readonly ? ' readonly' : '') + formEvents + '>';\r\n                    break;\r\n                case 'password':\r\n                    template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"password\" ng-minlength=\"6\" ' + (attributes.required ? 'required' : '') + formEvents + '>';\r\n                    break;\r\n                case 'email':\r\n                    template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"email\" ' + (attributes.required ? 'required' : '') + formEvents + '>';\r\n                    break;\r\n                case 'number':\r\n                    template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"text\"' + (attributes.required ? ' required' : '') + (attributes.readonly ? ' readonly' : '') + formEvents + ' validate-type=\"number\">'; // ' validator=\"{ number: isNumber }\">';\r\n                    break;\r\n                case 'text':\r\n                default:\r\n                    template += '<input name=\"' + name + '\" class=\"form-control\" ng-model=\"' + model + '\"' + (attributes.options ? ' ng-model-options=\"' + attributes.options + '\" ' : '') + ' placeholder=\"' + placeholder + '\" type=\"text\"' + (attributes.required ? ' required' : '') + (attributes.readonly ? ' readonly' : '') + formEvents + '>';\r\n                    break;\r\n            }\r\n            template + '</div>';\r\n            /* DEBUG \r\n            template += '<div>name <span>' + name + '</span></div>';\r\n            template += '<div>formKey <span>' + formKey + '</span></div>';\r\n            template += '<div>$valid <span ng-bind=\"' + formKey + '.$valid\"></span></div>';\r\n            template += '<div>$invalid <span ng-bind=\"' + formKey + '.$invalid\"></span></div>';\r\n            template += '<div>$viewValue <span ng-bind=\"' + formKey + '.$viewValue\"></span></div>';\r\n            template += '<div>$modelValue <span ng-bind=\"' + formKey + '.$modelValue\"></span></div>';\r\n            */\r\n            return template;\r\n        },\r\n        link: function (scope, element, attributes, model) {\r\n\r\n        },\r\n    };\r\n}]);\r\n\r\napp.directive('controlAutocomplete', ['$parse', '$window', '$timeout', function ($parse, $window, $timeout) {\r\n\r\n    var MAX_ITEMS = 5;\r\n\r\n    return {\r\n        restrict: 'A',\r\n        scope: {\r\n            service: '=controlAutocomplete',\r\n            canCreate: '=',\r\n            flatten: '=',\r\n            queryable: '=',\r\n            model: '=',\r\n            label: '@',\r\n            key: '@',\r\n        },\r\n        template: function (element, attributes) {\r\n            var template = '<div>';\r\n            template += '   <input class=\"form-control\" ng-model=\"phrase\" ng-model-options=\"{ debounce: 150 }\" placeholder=\"' + attributes.placeholder + '\" type=\"text\" ng-focus=\"onFocus()\">';\r\n            template += '   <ul class=\"form-autocomplete\" ng-show=\"items.length\">';\r\n            template += '       <li ng-repeat=\"item in items\" ng-class=\"{ active: active == $index }\" ng-click=\"onSelect(item)\">';\r\n            template += '           <span>{{item.NameA}}<span class=\"token\">{{item.NameB}}</span>{{item.NameC}}</span>';\r\n            template += '       </li>';\r\n            template += '   </ul>';\r\n            template += '</div>';\r\n            return template;\r\n        },\r\n        link: function (scope, element, attributes, model) {\r\n\r\n            var onSelected = $parse(attributes.onSelected);\r\n\r\n            // console.log ('onSelected', onSelected);\r\n\r\n            var input = element.find('input');\r\n            var label = (scope.label ? scope.label : 'name');\r\n            var key = (scope.key ? scope.key : 'id');\r\n\r\n            function getPhrase() {\r\n                if (scope.model) {\r\n                    return scope.flatten ? scope.model : scope.model[label];\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            scope.phrase = getPhrase();\r\n            scope.count = 0;\r\n            scope.items = [];\r\n            scope.active = -1;\r\n            scope.maxItems = scope.maxItems || Number.POSITIVE_INFINITY;\r\n\r\n            function Clear(phrase) {\r\n                scope.items.length = 0;\r\n                scope.count = 0;\r\n                scope.phrase = phrase || null;\r\n                input.val(scope.phrase);\r\n            }\r\n\r\n            function Current() {\r\n                var current = null;\r\n                if (scope.active != -1 && scope.items.length > scope.active) {\r\n                    current = scope.items[scope.active];\r\n                }\r\n                return current;\r\n            }\r\n\r\n            scope.onFocus = function () {\r\n                if (attributes.onFocus !== undefined) {\r\n                    scope.$parent.$eval(attributes.onFocus);\r\n                }\r\n                if (input.val() === getPhrase()) {\r\n                    input.val(null);\r\n                }\r\n            };\r\n\r\n            scope.onBlur = function () {\r\n                if (attributes.onBlur !== undefined) {\r\n                    scope.$parent.$eval(attributes.onBlur);\r\n                }\r\n                Clear(getPhrase());\r\n            };\r\n\r\n            scope.onSelect = function (item) {\r\n                if (scope.queryable) {\r\n                    scope.service.setItem(item).then(function (parsedItem) {\r\n                        onSelected({ $item: parsedItem }, scope.$parent, { $event: {} });\r\n                        $timeout(function () {\r\n                            if (scope.flatten) {\r\n                                scope.model = parsedItem[key];\r\n                            } else {\r\n                                scope.model = scope.model || {};\r\n                                angular.extend(scope.model, parsedItem);\r\n                            }\r\n                            scope.onBlur();\r\n                        }, 1);\r\n                    });\r\n                } else {\r\n                    onSelected({ $item: item }, scope.$parent, { $event: {} });\r\n                    if (scope.flatten) {\r\n                        scope.model = item[key];\r\n                    } else {\r\n                        scope.model = scope.model || {};\r\n                        angular.extend(scope.model, item);\r\n                    }\r\n                    scope.onBlur();\r\n                }\r\n            };\r\n\r\n            function onTyping(phrase) {\r\n                if (scope.canCreate) {\r\n                    if (scope.flatten) {\r\n                        if (key === label) {\r\n                            scope.model = phrase;\r\n                        }\r\n                    } else {\r\n                        scope.model = {};\r\n                        scope.model[label] = phrase;\r\n                    }\r\n                }\r\n                // console.log(scope.model);\r\n            };\r\n\r\n            function Enter() {\r\n                var item = Current();\r\n                if (item) {\r\n                    scope.onSelect(item);\r\n                }\r\n                scope.$apply();\r\n            }\r\n\r\n            function Up() {\r\n                scope.active--;\r\n                if (scope.active < 0) {\r\n                    scope.active = scope.items.length - 1;\r\n                }\r\n                scope.$apply();\r\n            }\r\n\r\n            function Down() {\r\n                scope.active++;\r\n                if (scope.items.length == 0) {\r\n                    scope.active = -1;\r\n                } else if (scope.active >= scope.items.length) {\r\n                    scope.active = 0;\r\n                }\r\n                scope.$apply();\r\n            }\r\n\r\n            function Parse(data) {\r\n                scope.items = data.items;\r\n                scope.count = data.count;\r\n                angular.forEach(scope.items, function (value, index) {\r\n                    var name = value[label];\r\n                    var i = name.toLowerCase().indexOf(scope.phrase.toLowerCase());\r\n                    value.NameA = name.substr(0, i);\r\n                    value.NameB = name.substr(i, scope.phrase.length);\r\n                    value.NameC = name.substr(i + scope.phrase.length, name.length - (i + scope.phrase.length));\r\n                });\r\n            }\r\n\r\n            function Filter(data) {\r\n                var c = 0, i = [];\r\n                if (scope.phrase.length > 1) {\r\n                    angular.forEach(data.items, function (value, index) {\r\n                        var name = value[label];\r\n                        if (name.toLowerCase().indexOf(scope.phrase.toLowerCase()) !== -1) {\r\n                            if (i.length < MAX_ITEMS) {\r\n                                i.push(value);\r\n                            }\r\n                            c++;\r\n                        }\r\n                    });\r\n                }\r\n                Parse({\r\n                    count: c,\r\n                    items: i\r\n                });\r\n            }\r\n\r\n            function Search() {\r\n                scope.phrase = input.val();\r\n                scope.active = -1;\r\n                onTyping(scope.phrase);\r\n                if (scope.queryable) {\r\n                    scope.service.setPhrase(scope.phrase).then(function (success) {\r\n                        scope.items = success.items;\r\n                        scope.count = success.count;\r\n                    }, function (error) {\r\n                        console.log('Search.queryable.error', scope.phrase, error);\r\n                    }).finally(function () {\r\n\r\n                    });\r\n                } else {\r\n                    Filter({\r\n                        count: scope.service.length,\r\n                        items: scope.service\r\n                    });\r\n                    scope.$apply();\r\n                }\r\n            }\r\n\r\n            function onKeyDown(e) {\r\n                switch (e.keyCode) {\r\n                    case 9: // Tab\r\n                    case 13: // Enter                        \r\n                        Enter();\r\n                        if (scope.items.length) {\r\n                            e.preventDefault ? e.preventDefault() : null;\r\n                            return false;\r\n                        }\r\n                        break;\r\n                    case 38:\r\n                        // Up\r\n                        Up();\r\n                        break;\r\n                    case 40:\r\n                        // Down\r\n                        Down();\r\n                        break;\r\n                }\r\n            }\r\n            function onKeyUp(e) {\r\n                switch (e.keyCode) {\r\n                    case 9: // Tab\r\n                    case 13: // Enter     \r\n                        break;\r\n                    case 39:\r\n                        // Right\r\n                        break;\r\n                    case 37:\r\n                        // Left\r\n                        break;\r\n                    case 38:\r\n                        // Up\r\n                        break;\r\n                    case 40:\r\n                        // Down\r\n                        break;\r\n                    default:\r\n                        // Text\r\n                        Search.call(this);\r\n                        break;\r\n                }\r\n            }\r\n            function onUp(e) {\r\n                if (e.type == 'touchend') {\r\n                    angular.element($window).off('mouseup', onUp);\r\n                }\r\n                if (Utils.getClosest(e.target, '[control-autocomplete]') === null) {\r\n                    scope.$apply(function () {\r\n                        // console.log('onUp');\r\n                        scope.onBlur();\r\n                    });\r\n                }\r\n                return true;\r\n            }\r\n\r\n            function addListeners() {\r\n                input.on('keydown', onKeyDown);\r\n                input.on('keyup', onKeyUp);\r\n                angular.element($window).on('mouseup touchend', onUp);\r\n            };\r\n            function removeListeners() {\r\n                input.off('keydown', onKeyDown);\r\n                input.off('keyup', onKeyUp);\r\n                angular.element($window).off('mouseup touchend', onUp);\r\n\r\n            };\r\n            scope.$on('$destroy', function () {\r\n                removeListeners();\r\n            });\r\n\r\n            var init = false;\r\n            function Init() {\r\n                if (!init) {\r\n                    addListeners();\r\n                    init = true;\r\n                }\r\n            }\r\n\r\n            scope.$watch('service', function (newValue) {\r\n                if (newValue && (newValue.length || scope.queryable)) {\r\n                    Init();\r\n                }\r\n            });\r\n\r\n            scope.$watchCollection('model', function (newValue) {\r\n                // console.log('controlAutocomplete.$watchCollection.model', newValue);\r\n                if (newValue) {\r\n                    if (scope.flatten && label === key) {\r\n                        scope.phrase = newValue;\r\n                        input.val(scope.phrase);\r\n                    } else if (newValue[label]) {\r\n                        scope.phrase = newValue[label];\r\n                        input.val(scope.phrase);\r\n                    }\r\n                }\r\n            });\r\n\r\n        },\r\n    };\r\n}]);\r\n\n/*global angular */\r\n\r\napp.factory('Config', ['$http', function ($http) {\r\n    $http.get('config.json').then(function (response) {\r\n        angular.extend(this, response.data);\r\n    }.bind(this));\r\n    return this;\r\n}]);\r\n\r\napp.factory('Model', [function () {\r\n    function Model(data) {\r\n        // Extend instance with data\r\n        data ? angular.extend(this, data) : null;\r\n    }\r\n    Model.prototype = {\r\n        toString: function () {\r\n            return \"Model\";\r\n        },\r\n    };\r\n    return Model;\r\n}]);\r\n\n/*global angular */\r\n\r\napp.factory('Models', ['$q', '$http', 'Model', function ($q, $http, Model) {\r\n    function Models() {\r\n    }\r\n    Models.get = function () {\r\n        var deferred = $q.defer();\r\n            $http.get(APP.API + '/api/models').then(function success(response) {\r\n            var models = [];\r\n            angular.forEach(response.data, function (data) {\r\n                models.push(new Model(data));\r\n            });\r\n            deferred.resolve(models);\r\n        }, function error(response) {\r\n            deferred.reject(response);\r\n        });\r\n        return deferred.promise;\r\n    };\r\n    return Models;\r\n}]);\r\n\r\napp.factory('AuthInterceptorService', ['$q', '$rootScope', '$window', '$location', 'LocalStorage', function ($q, $rootScope, $window, $location, LocalStorage) {\r\n    return {\r\n        isAuthorizedOrGoTo: function (redirect) {\r\n            var deferred = $q.defer();\r\n            var auth = LocalStorage.get('authorization');\r\n            if (auth && auth.created_at + auth.expires_in < new Date().getTime()) {\r\n                deferred.resolve(auth);\r\n            } else {\r\n                deferred.reject({ status: 'unauthorized' });\r\n                $location.path(redirect);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        isAuthorized: function () {\r\n            var auth = LocalStorage.get('authorization');\r\n            return (auth && auth.created_at + auth.expires_in < new Date().getTime());\r\n        },\r\n        request: function (config) {\r\n            var auth = LocalStorage.get('authorization');\r\n            if (auth && auth.created_at + auth.expires_in < new Date().getTime()) {\r\n                config.headers = config.headers || {};\r\n                config.headers.Authorization = 'Bearer ' + auth.access_token; // add your token from your service or whatever\r\n            }\r\n            // console.log('auth', auth, config.headers);\r\n            return config;\r\n        },\r\n        response: function (response) {\r\n            return response || $q.when(response);\r\n        },\r\n        responseError: function (error) {\r\n            // your error handler\r\n            switch (error.status) {\r\n                case 400:\r\n                    var errors = [];\r\n                    if (error.data) {\r\n                        errors.push(error.data.Message);\r\n                        for (var key in error.data.ModelState) {\r\n                            for (var i = 0; i < error.data.ModelState[key].length; i++) {\r\n                                errors.push(error.data.ModelState[key][i]);\r\n                            }\r\n                        }\r\n                    } else {\r\n                        errors.push('Server error');\r\n                    }\r\n                    error.Message = errors.join(' ');\r\n                    // warning !!\r\n                    $rootScope.httpError = error;\r\n                    $rootScope.$broadcast('onHttpInterceptorError', error);\r\n                    break;\r\n                case 404:\r\n                    error.Message = \"Not found\";\r\n                    $rootScope.httpError = error;\r\n                    $rootScope.$broadcast('onHttpInterceptorError', error);\r\n                    break;\r\n                case 500:\r\n                    // console.log('500',error);\r\n                    $rootScope.httpError = error;\r\n                    $rootScope.$broadcast('onHttpInterceptorError', error);\r\n                    break;\r\n                case 401:\r\n                    LocalStorage.delete('authorization');\r\n                    LocalStorage.delete('user');\r\n                    $location.path('/signin');\r\n                    break;\r\n                    // status == 0 you lost connection\r\n            }\r\n            return $q.reject(error);\r\n        },\r\n        signOut: function () {\r\n            LocalStorage.delete('authorization');\r\n            LocalStorage.delete('user');\r\n            LocalStorage.delete('CampagnoloToken');\r\n            LocalStorage.delete('GoogleToken');\r\n            LocalStorage.delete('StravaToken');\r\n            LocalStorage.delete('FacebookToken');\r\n            LocalStorage.delete('GarminToken');\r\n        },\r\n    };\r\n}]);\r\n\r\n/** USERS SERVICE **/\r\napp.factory('Users', ['$q', '$http', '$httpAsync', '$location', '$timeout', 'APP', 'LocalStorage', 'AuthInterceptorService', 'User', function ($q, $http, $httpAsync, $location, $timeout, APP, LocalStorage, AuthInterceptorService, User) {\r\n\r\n    // PRIVATE VARIABLE FOR CURRENT USER\r\n    var _current = null;\r\n\r\n    function Users() {\r\n    }\r\n\r\n    Users.prototype = {\r\n    };\r\n\r\n    Users.current = function () {\r\n        return Users.get();\r\n    };\r\n\r\n    Users.set = function (user) {\r\n        LocalStorage.set('user', user);\r\n        _current = user ? new User(user) : null;\r\n        APP.USER = _current;\r\n        return _current;\r\n    };\r\n\r\n    Users.get = function () {\r\n        if (_current !== null) {\r\n            return _current;\r\n        } else {\r\n            var user = LocalStorage.get('user');\r\n            if (user) {\r\n                _current = new User(user);\r\n                APP.USER = _current;\r\n                return _current;\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    };\r\n\r\n    Users.getCurrentUser = function () {\r\n        var deferred = $q.defer();\r\n        if (_current) {\r\n            deferred.resolve(_current);\r\n        } else {\r\n            $http.get(APP.API + '/api/v1/users/me').then(function success(response) {\r\n                if (response && response.data) {\r\n                    deferred.resolve(Users.set(response.data));\r\n                } else {\r\n                    deferred.resolve(Users.set(null));\r\n                }\r\n            }, function error(response) {\r\n                deferred.reject(response);\r\n            });\r\n        }\r\n        return deferred.promise;\r\n    };\r\n\r\n    Users.isAuthorizedOrGoTo = function (redirect) {\r\n        var deferred = $q.defer();\r\n        if (AuthInterceptorService.isAuthorized()) {\r\n            Users.getCurrentUser().then(function (user) {\r\n                if (user) {\r\n                    deferred.resolve(user);\r\n                } else {\r\n                    deferred.reject();\r\n                    $location.path(redirect);\r\n                }\r\n            }, function error(response) {\r\n                deferred.reject(response);\r\n                $location.path(redirect);\r\n            });\r\n        } else {\r\n            deferred.reject(null);\r\n            $location.path(redirect);\r\n        }\r\n        return deferred.promise;\r\n    };\r\n\r\n    Users.signOut = function () {\r\n        var deferred = $q.defer();\r\n        Users.set(null);\r\n        AuthInterceptorService.signOut();\r\n        deferred.resolve();\r\n        return deferred.promise;\r\n    };\r\n\r\n    return Users;\r\n}]);\r\n\r\n/** DATA SOURCE **/\r\n\r\napp.factory('DataFilter', [function () {\r\n    function DataFilter(data) {\r\n        /*\r\n        this.dateFrom = null;\r\n        this.dateTo = null;\r\n        this.search = null;\r\n        this.status = null;\r\n        */\r\n        data ? angular.extend(this, data) : null;\r\n    }\r\n    DataFilter.prototype = {\r\n        getSearchParams: function (search) {\r\n            var a = [];\r\n            if (search) {\r\n                for (var p in search) {\r\n                    a.push({ name: p, value: search[p] });\r\n                }\r\n            }\r\n            return a;\r\n        },\r\n        getParams: function (source, infinite) {\r\n            var post = {}, value;\r\n            for (var p in this) {\r\n                if (p === 'dateFrom' ||\r\n                    p === 'dateTo' ||\r\n                    p === 'status') {\r\n                    value = this[p];\r\n                    if (value !== undefined) {\r\n                        post[p] = value;\r\n                    }\r\n                } else if (p === 'search') {\r\n                    post[p] = JSON.stringify(this.getSearchParams(this[p]), null, '');\r\n                }\r\n            }\r\n            post.page = source.page;\r\n            post.size = source.size;\r\n            post.infinite = infinite;\r\n            return post;\r\n        },\r\n    };\r\n    return DataFilter;\r\n}]);\r\n\r\napp.factory('DataSource', ['$q', '$http', '$httpAsync', '$timeout', '$rootScope', 'DataFilter', function ($q, $http, $httpAsync, $timeout, $rootScope, DataFilter) {\r\n\r\n    var PAGES_MAX = Number.POSITIVE_INFINITY;\r\n\r\n    function DataSource(data) {\r\n        this.busy = false;\r\n        this.error = false;\r\n        this.size = 10;\r\n        this.maxPages = 10;\r\n        this.rows = [];\r\n        this.filters = {};\r\n        this.service = {\r\n            url: '/api/items/paging',\r\n            resolve: function (items, rows) {\r\n                angular.forEach(items, function (item) {\r\n                    this.push(item);\r\n                }, rows);\r\n            },\r\n        };\r\n        data ? angular.extend(this, data) : null;\r\n        this.filters = new DataFilter(this.filters);\r\n        // FAKE SERVICE FOR TEST !!!\r\n        if (this.service.uri.paging === false) {\r\n            this.get = function (deferred, infinite) {\r\n                this.busy = true;\r\n                this.error = false;\r\n                $timeout(function () {\r\n                    infinite ? null : this.rows.length = 0;\r\n                    this.service.resolve(this.rows);\r\n                    this.page = 1;\r\n                    this.pages = 2;\r\n                    this.count = this.rows.length;\r\n                    this.pagination = this.getPages();\r\n                    this.busy = false;\r\n                    $rootScope.$broadcast('onDataSourceUpdate', this);\r\n                    deferred.resolve(this.rows);\r\n                    // console.log('DataSource.get');                    \r\n                }.bind(this), 1000);\r\n            };\r\n        }\r\n        this.flush();\r\n    }\r\n    DataSource.prototype = {\r\n        flush: function () {\r\n            this.pages = PAGES_MAX;\r\n            this.page = 1;\r\n            this.count = 0;\r\n            this.opened = null;\r\n        },\r\n        resolve: function (response) {\r\n            var responseHeader = response.headers('X-Pagination');\r\n            var responseView = responseHeader ? JSON.parse(responseHeader) : null;\r\n            // console.log('response', response, 'responseHeader', responseHeader, 'responseView', responseView);\r\n            if (responseView) {\r\n                this.page = responseView.page;\r\n                this.size = responseView.size;\r\n                this.pages = responseView.pages;\r\n                this.count = responseView.count;\r\n            } else {\r\n                this.page = 0;\r\n                this.size = responseView.size;\r\n                this.pages = 0;\r\n                this.count = 0;\r\n            }\r\n            this.pagination = this.getPages();\r\n        },\r\n        get: function (deferred, infinite) {\r\n            this.busy = true;\r\n            this.error = false;\r\n            $httpAsync.get(this.service.uri.paging, { params: this.filters.getParams(this) }).then(function success(response) {\r\n                this.resolve(response);\r\n                infinite ? null : this.rows.length = 0;\r\n                this.service.resolve(response.data, this.rows);\r\n                $rootScope.$broadcast('onDataSourceUpdate', this);\r\n                deferred.resolve(this.rows);\r\n            }.bind(this), function error(response) {\r\n                console.log('DataSource.error', response);\r\n                this.error = true;\r\n                deferred.reject(response);\r\n            }.bind(this))\r\n                .finally(function () {\r\n                    // console.log('DataSource.get');\r\n                    $timeout(function () {\r\n                        this.busy = false;\r\n                    }.bind(this), 1000);\r\n                }.bind(this));\r\n        },\r\n        paging: function () {\r\n            var deferred = $q.defer();\r\n            if (this.busy || this.page > this.pages) {\r\n                deferred.reject();\r\n            } else {\r\n                // console.log('DataSource.paging');\r\n                this.opened = null;\r\n                this.get(deferred);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        refresh: function () {\r\n            var deferred = $q.defer();\r\n            if (this.busy) {\r\n                deferred.reject();\r\n            } else {\r\n                // console.log('DataSource.refresh');\r\n                this.flush();\r\n                this.get(deferred);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        more: function () {\r\n            var deferred = $q.defer();\r\n            if (this.busy || this.page + 1 > this.pages) {\r\n                deferred.reject();\r\n            } else {\r\n                // console.log('DataSource.more');\r\n                this.page++;\r\n                this.get(deferred, true);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        filter: function () {\r\n            this.page = 1;\r\n            this.pages = PAGES_MAX;\r\n            this.paging();\r\n        },\r\n        prevPage: function () {\r\n            var page = this.page - 1;\r\n            if (page > 0 && page <= this.pages) {\r\n                this.page = page;\r\n                this.paging();\r\n            }\r\n        },\r\n        nextPage: function () {\r\n            var page = this.page + 1;\r\n            if (page > 0 && page <= this.pages) {\r\n                this.page = page;\r\n                this.paging();\r\n            }\r\n        },\r\n        gotoPage: function (page) {\r\n            if (page > 0 && page <= this.pages) {\r\n                this.page = page;\r\n                this.paging();\r\n            }\r\n        },\r\n        firstPage: function () {\r\n            if (this.page !== 1) {\r\n                this.page = 1;\r\n                this.paging();\r\n            }\r\n        },\r\n        lastPage: function () {\r\n            if (this.page !== this.pages) {\r\n                this.page = this.pages;\r\n                this.paging();\r\n            }\r\n        },\r\n        hasMany: function () {\r\n            return this.count > 0 && this.pages > this.maxPages;\r\n        },\r\n        hasMorePagesBehind: function () {\r\n            var startingIndex = Math.max(0, this.page - this.maxPages);\r\n            return startingIndex > 0;\r\n        },\r\n        hasMorePagesNext: function () {\r\n            var endingIndex = Math.max(0, this.page - this.maxPages) + this.maxPages;\r\n            return endingIndex < this.pages;\r\n        },\r\n        isPage: function (number) {\r\n            return this.page === number;\r\n        },\r\n        hasPages: function () {\r\n            return this.pages > 0 && this.pages < PAGES_MAX;\r\n        },\r\n        getPages: function () {\r\n            var a = [], i;\r\n            if (this.hasPages()) {\r\n                var startingIndex = Math.max(0, this.page - this.maxPages);\r\n                var endingIndex = Math.min(this.pages, startingIndex + this.maxPages);\r\n                i = startingIndex;\r\n                while (i < endingIndex) {\r\n                    a.push({ number: (i + 1) });\r\n                    i++;\r\n                }\r\n            }\r\n            return a;\r\n        },\r\n        openClose: function (index) {\r\n            if (this.opened === index) {\r\n                this.opened = null;\r\n            } else {\r\n                this.opened = index;\r\n            }\r\n        }\r\n    };\r\n    return DataSource;\r\n}]);\r\n\r\n/** INDEXED DATA SOURCE **/\r\n\r\napp.factory('IndexedDataFilter', [function () {\r\n    function IndexedDataFilter(data) {\r\n        data ? angular.extend(this, data) : null;\r\n    }\r\n    IndexedDataFilter.prototype = {\r\n        getSearchParams: function (search) {\r\n            var a = [];\r\n            if (search) {\r\n                for (var p in search) {\r\n                    a.push({ name: p, value: search[p] });\r\n                }\r\n            }\r\n            return a;\r\n        },\r\n        getParams: function (source, infinite) {\r\n            var post = {}, value;\r\n            for (var p in this) {\r\n                if (p === 'dateFrom' ||\r\n                    p === 'dateTo' ||\r\n                    p === 'status') {\r\n                    value = this[p];\r\n                    if (value !== undefined) {\r\n                        post[p] = value;\r\n                    }\r\n                } else if (p === 'search') {\r\n                    post[p] = JSON.stringify(this.getSearchParams(this[p]), null, '');\r\n                }\r\n            }\r\n            post.page_index = source.page;\r\n            post.page_size = source.size;\r\n            return post;\r\n        },\r\n    };\r\n    return IndexedDataFilter;\r\n}]);\r\n\r\napp.factory('IndexedDataSource', ['$q', '$http', '$httpAsync', '$timeout', '$rootScope', 'IndexedDataFilter', 'APP', function ($q, $http, $httpAsync, $timeout, $rootScope, IndexedDataFilter, APP) {\r\n\r\n    var PAGES_MAX = Number.POSITIVE_INFINITY;\r\n\r\n    function IndexedDataSource(data) {\r\n        this.busy = false;\r\n        this.error = false;\r\n        this.size = 10;\r\n        this.maxPages = 10;\r\n        this.rows = [];\r\n        this.filters = {};\r\n        this.service = {\r\n            url: '/api/items/paging',\r\n            resolve: function (items, rows) {\r\n                angular.forEach(items, function (item) {\r\n                    this.push(item);\r\n                }, rows);\r\n            },\r\n        };\r\n        data ? angular.extend(this, data) : null;\r\n        this.filters = new IndexedDataFilter(this.filters);\r\n        // FAKE SERVICE FOR TEST !!!\r\n        if (this.service.uri.paging === false) {\r\n            this.get = function (deferred, infinite) {\r\n                this.busy = true;\r\n                this.error = false;\r\n                $timeout(function () {\r\n                    infinite ? null : this.rows.length = 0;\r\n                    this.service.resolve(this.rows);\r\n                    this.page = 1;\r\n                    this.pages = 2;\r\n                    this.count = this.rows.length;\r\n                    this.pagination = this.getPages();\r\n                    this.busy = false;\r\n                    $rootScope.$broadcast('onIndexedDataSourceUpdate', this);\r\n                    deferred.resolve(this.rows);\r\n                    // console.log('IndexedDataSource.get');                    \r\n                }.bind(this), 1000);\r\n            };\r\n        }\r\n        this.flush();\r\n    }\r\n    IndexedDataSource.prototype = {\r\n        flush: function () {\r\n            this.pages = PAGES_MAX;\r\n            this.page = 0;\r\n            this.count = 0;\r\n            this.opened = null;\r\n        },\r\n        resolve: function (response) {\r\n            if (response && response.data) {\r\n                this.count = response.data.count;\r\n                this.pages = Math.ceil(this.count / this.size);\r\n            } else {\r\n                this.page = 0;\r\n                this.pages = 0;\r\n                this.count = 0;\r\n            }\r\n            this.pagination = this.getPages();\r\n        },\r\n        get: function (deferred, infinite) {\r\n            this.busy = true;\r\n            this.error = false;\r\n            var url = this.service.uri.paging.split(\"##userId##\").join(APP.USER.id);\r\n            // $httpAsync.get(url, { params: this.filters.getParams(this) }).then(function success(response) {\r\n            $http.get(url, { params: this.filters.getParams(this) }).then(function success(response) {\r\n                this.resolve(response);\r\n                infinite ? null : this.rows.length = 0;\r\n                this.service.resolve(response.data.list, this.rows);\r\n                $rootScope.$broadcast('onIndexedDataSourceUpdate', this);\r\n                deferred.resolve(this.rows);\r\n            }.bind(this), function error(response) {\r\n                console.log('IndexedDataSource.error', response);\r\n                this.error = true;\r\n                deferred.reject(response);\r\n            }.bind(this))\r\n                .finally(function () {\r\n                    // console.log('IndexedDataSource.get');\r\n                    $timeout(function () {\r\n                        this.busy = false;\r\n                    }.bind(this), 1000);\r\n                }.bind(this));\r\n        },\r\n        paging: function () {\r\n            var deferred = $q.defer();\r\n            if (this.busy || this.page >= this.pages) {\r\n                deferred.reject();\r\n            } else {\r\n                // console.log('IndexedDataSource.paging');\r\n                this.opened = null;\r\n                this.get(deferred);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        refresh: function () {\r\n            var deferred = $q.defer();\r\n            if (this.busy) {\r\n                deferred.reject();\r\n            } else {\r\n                // console.log('IndexedDataSource.refresh');\r\n                this.flush();\r\n                this.get(deferred);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        more: function () {\r\n            var deferred = $q.defer();\r\n            if (this.busy || this.page + 1 >= this.pages) {\r\n                deferred.reject();\r\n            } else {\r\n                // console.log('IndexedDataSource.more');\r\n                this.page++;\r\n                this.get(deferred, true);\r\n            }\r\n            return deferred.promise;\r\n        },\r\n        filter: function () {\r\n            this.page = 1;\r\n            this.pages = PAGES_MAX;\r\n            this.paging();\r\n        },\r\n        prevPage: function () {\r\n            var page = this.page - 1;\r\n            if (page >= 0 && page < this.pages) {\r\n                this.page = page;\r\n                this.paging();\r\n            }\r\n        },\r\n        nextPage: function () {\r\n            var page = this.page + 1;\r\n            if (page >= 0 && page < this.pages) {\r\n                this.page = page;\r\n                this.paging();\r\n            }\r\n        },\r\n        gotoPage: function (page) {\r\n            if (page >= 0 && page < this.pages) {\r\n                this.page = page;\r\n                this.paging();\r\n            }\r\n        },\r\n        firstPage: function () {\r\n            if (this.page !== 0) {\r\n                this.page = 0;\r\n                this.paging();\r\n            }\r\n        },\r\n        lastPage: function () {\r\n            if (this.page !== Math.max(0, this.pages - 1)) {\r\n                this.page = Math.max(0, this.pages - 1);\r\n                this.paging();\r\n            }\r\n        },\r\n        hasMany: function () {\r\n            return this.count > 0 && this.pages > this.maxPages;\r\n        },\r\n        hasMorePagesBehind: function () {\r\n            var startingIndex = Math.max(0, this.page - this.maxPages);\r\n            return startingIndex > 0;\r\n        },\r\n        hasMorePagesNext: function () {\r\n            var endingIndex = Math.max(0, this.page - this.maxPages) + this.maxPages;\r\n            return endingIndex < this.pages;\r\n        },\r\n        isPage: function (number) {\r\n            return this.page + 1 === number;\r\n        },\r\n        hasPages: function () {\r\n            return this.pages > 0 && this.pages < PAGES_MAX;\r\n        },\r\n        getPages: function () {\r\n            var a = [], i;\r\n            if (this.hasPages()) {\r\n                var startingIndex = Math.max(0, this.page - this.maxPages);\r\n                var endingIndex = Math.min(this.pages, startingIndex + this.maxPages);\r\n                i = startingIndex;\r\n                while (i < endingIndex) {\r\n                    a.push({ number: (i + 1) });\r\n                    i++;\r\n                }\r\n            }\r\n            return a;\r\n        },\r\n        openClose: function (index) {\r\n            if (this.opened === index) {\r\n                this.opened = null;\r\n            } else {\r\n                this.opened = index;\r\n            }\r\n        }\r\n    };\r\n    return IndexedDataSource;\r\n}]);\r\n\r\n/** TABS PROVIDER **/\r\napp.factory('TabsProvider', ['Collection', function (Collection) {\r\n    var TabsProvider = Collection.extend({\r\n        init: function () {\r\n            // console.log('TabsProvider.init', this);\r\n            this.current = 0;\r\n        },\r\n        isIndex: function (index) {\r\n            return this.current === index;\r\n        },\r\n        setIndex: function (index) {\r\n            if (index >= 0 && index < this.length) {\r\n                this.current = index;\r\n            }\r\n        },\r\n        isValue: function (value) {\r\n            return this[this.current].value === value;\r\n        },\r\n        setValue: function (value) {\r\n            var index = this.indexOfValue(value);\r\n            if (index !== -1) {\r\n                this.current = index;\r\n            }\r\n        },\r\n        indexOfValue: function (value) {\r\n            var index = -1, i = 0, t = this.length;\r\n            while (i < t) {\r\n                if (this[i].value === value) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n            return index;\r\n        },\r\n    });\r\n\r\n    return TabsProvider;\r\n}]);\r\napp.factory('ListProvider', ['Collection', function (Collection) {\r\n    var TabsProvider = Collection.extend({\r\n        init: function () {\r\n        },\r\n        stringOfValues: function (key) {\r\n            var _values = '', i = 0, t = this.length;\r\n            while (i < t) {\r\n                _values += (i > 0 ? ', ' : '') + this[i][key];\r\n                i++;\r\n            }\r\n            return _values;\r\n        },\r\n        indexOfValue: function (value) {\r\n            var index = -1, i = 0, t = this.length;\r\n            while (i < t) {\r\n                if (this[i].value === value) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n                i++;\r\n            }\r\n            return index;\r\n        },\r\n        toString: function () {\r\n            return this.stringOfValues('name');\r\n        }\r\n    });\r\n\r\n    return TabsProvider;\r\n}]);\r\napp.factory('Collection', [function () {\r\n\r\n    function Collection() {\r\n        // console.log('Collection.constructor', this);\r\n        var collection = Object.create(Array.prototype);\r\n        collection = (Array.apply(collection, arguments) || collection);\r\n        // Add all the class methods to the collection.\r\n        this.constructor.inject(collection);\r\n        collection.init();\r\n        return (collection);\r\n    }\r\n\r\n    Collection.inject = function (collection) {\r\n        for (var method in this.prototype) {\r\n            // Make sure this is a local method.\r\n            if (this.prototype.hasOwnProperty(method)) {\r\n                collection[method] = this.prototype[method];\r\n            }\r\n        }\r\n        return (collection);\r\n    };\r\n\r\n    Collection.extend = function (prototype) {\r\n        var constructor = function () {\r\n            return Collection.apply(this, arguments);\r\n        }\r\n        // statics\r\n        angular.extend(constructor, this);\r\n        // prototypes\r\n        constructor.prototype = angular.extend({}, this.prototype, prototype);\r\n        constructor.prototype.constructor = constructor;\r\n        return constructor;\r\n    };\r\n\r\n    Collection.__extend = function (constructor, prototype) {\r\n        // statics\r\n        angular.extend(constructor, this);\r\n        // prototypes\r\n        constructor.prototype = angular.extend({}, this.prototype, prototype);\r\n        constructor.prototype.constructor = constructor;\r\n        return constructor;\r\n    };\r\n\r\n    Collection.fromArray = function (array) {\r\n        var collection = Collection.apply(null, array);\r\n        return (collection);\r\n    };\r\n\r\n    Collection.isArray = function (value) {\r\n        var stringValue = Object.prototype.toString.call(value);\r\n        return (stringValue.toLowerCase() === \"[object array]\");\r\n    };\r\n\r\n    Collection.prototype = {\r\n        constructor: Collection,\r\n        init: function () {\r\n            // console.log('Collection.init', this);\r\n        },\r\n        add: function (value) {\r\n            if (Collection.isArray(value)) {\r\n                for (var i = 0 ; i < value.length ; i++) {\r\n                    // Add the sub-item using default push() method.\r\n                    Array.prototype.push.call(this, value[i]);\r\n                }\r\n            } else {\r\n                // Use the default push() method.\r\n                Array.prototype.push.call(this, value);\r\n            }\r\n            // Return this object reference for method chaining.\r\n            return (this);\r\n        },\r\n        addAll: function () {\r\n            // Loop over all the arguments to add them to the\r\n            // collection individually.\r\n            for (var i = 0 ; i < arguments.length ; i++) {\r\n                this.add(arguments[i]);\r\n            }\r\n            // Return this object reference for method chaining.\r\n            return (this);\r\n        }\r\n    };\r\n\r\n    return (Collection);\r\n\r\n\r\n    function ExtensibleObject(data) {\r\n        data ? this.set(data) : null;\r\n    }\r\n    ExtensibleObject.prototype = {\r\n        set: function (data) {\r\n            angular.extend(this, data);\r\n            this.init();\r\n        },\r\n        init: function () {\r\n            console.log('ExtensibleObject.init');\r\n        },\r\n    };\r\n    ExtensibleObject.extend = function (constructor, prototype) {\r\n        // statics\r\n        angular.extend(constructor, this);\r\n        // constructor.$ = constructor.$ || this.$;\r\n        // prototypes\r\n        constructor.prototype = angular.extend(Object.create(this.prototype), prototype);\r\n        constructor.prototype.constructor = constructor;\r\n        // one new pool for each model\r\n        // constructor.pool = {};\r\n        return constructor;\r\n    };\r\n    ExtensibleObject.prototype.constructor = ExtensibleObject;\r\n    return ExtensibleObject;\r\n}]);\r\napp.factory('ExtensibleObject', [function () {\r\n    function ExtensibleObject(data) {\r\n        data ? this.set(data) : null;\r\n    }\r\n    ExtensibleObject.prototype = {\r\n        set: function (data) {\r\n            angular.extend(this, data);\r\n            this.init();\r\n        },\r\n        init: function () {\r\n            console.log('ExtensibleObject.init');\r\n        },\r\n    };\r\n    ExtensibleObject.extend = function (constructor, prototype) {\r\n        // statics\r\n        angular.extend(constructor, this);\r\n        // constructor.$ = constructor.$ || this.$;\r\n        // prototypes\r\n        constructor.prototype = angular.extend(Object.create(this.prototype), prototype);\r\n        constructor.prototype.constructor = constructor;\r\n        // one new pool for each model\r\n        // constructor.pool = {};\r\n        return constructor;\r\n    };\r\n    ExtensibleObject.prototype.constructor = ExtensibleObject;\r\n    return ExtensibleObject;\r\n}]);\r\n\r\n/** LOCALSTORAGE SERVICE **/\r\napp.factory('Cookie', ['$q', '$window', function ($q, $window) {\r\n    function Cookie() {\r\n    }\r\n\r\n    Cookie.TIMEOUT = 5 * 60 * 1000; // five minutes\r\n\r\n    Cookie._set = function (name, value, days) {\r\n        if (days) {\r\n            var date = new Date();\r\n            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n            var expires = \"; expires=\" + date.toGMTString();\r\n        } else {\r\n            var expires = \"\";\r\n        }\r\n        $window.document.cookie = name + \"=\" + value + expires + \"; path=/\";\r\n    }\r\n\r\n    Cookie.set = function (name, value, days) {\r\n        try {\r\n            var cache = [];\r\n            var json = JSON.stringify(value, function (key, value) {\r\n                if (key === 'pool') {\r\n                    return;\r\n                }\r\n                if (typeof value === 'object' && value !== null) {\r\n                    if (cache.indexOf(value) !== -1) {\r\n                        // Circular reference found, discard key\r\n                        return;\r\n                    }\r\n                    cache.push(value);\r\n                }\r\n                return value;\r\n            });\r\n            cache = null;\r\n            Cookie._set(name, json, days);\r\n        } catch (e) {\r\n            console.log('Cookie.set.error serializing', name, value, e);\r\n        }\r\n    };\r\n\r\n    Cookie.get = function (name) {\r\n        var cookieName = name + \"=\";\r\n        var ca = $window.document.cookie.split(';');\r\n        for (var i = 0; i < ca.length; i++) {\r\n            var c = ca[i];\r\n            while (c.charAt(0) == ' ') {\r\n                c = c.substring(1, c.length);\r\n            }\r\n            if (c.indexOf(cookieName) == 0) {\r\n                var value = c.substring(cookieName.length, c.length);\r\n                var data = null;\r\n                try {\r\n                    data = JSON.parse(value);\r\n                } catch (e) {\r\n                    console.log('Cookie.get.error parsing', key, e);\r\n                };\r\n                return data;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n\r\n    Cookie.delete = function (name) {\r\n        Cookie._set(name, \"\", -1);\r\n    };\r\n\r\n    Cookie.on = function (name) {\r\n        var deferred = $q.defer();\r\n        var i, interval = 1000, elapsed = 0, timeout = Cookie.TIMEOUT;\r\n        function checkCookie() {\r\n            if (elapsed > timeout) {\r\n                deferred.reject('timeout');\r\n            } else {\r\n                var c = Cookie.get(name);\r\n                if (c) {\r\n                    deferred.resolve(c);\r\n                } else {\r\n                    elapsed += interval;\r\n                    i = setTimeout(checkCookie, interval);\r\n                }\r\n            }\r\n        }\r\n        checkCookie();\r\n        return deferred.promise;\r\n    };\r\n\r\n    return Cookie;\r\n}]);\r\napp.factory('LocalStorage', ['$q', '$window', 'Cookie', function ($q, $window, Cookie) {\r\n    function LocalStorage() {\r\n    }\r\n\r\n    function isLocalStorageSupported() {\r\n        var supported = false;\r\n        try {\r\n            supported = 'localStorage' in $window && $window['localStorage'] !== null;\r\n            if (supported) {\r\n                $window.localStorage.setItem('test', '1');\r\n                $window.localStorage.removeItem('test');\r\n            } else {\r\n                supported = false;\r\n            }\r\n        } catch (e) {\r\n            supported = false;\r\n        }\r\n        return supported;\r\n    }\r\n    LocalStorage.isSupported = isLocalStorageSupported();\r\n\r\n    if (LocalStorage.isSupported) {\r\n        LocalStorage.set = function (name, value) {\r\n            try {\r\n                var cache = [];\r\n                var json = JSON.stringify(value, function (key, value) {\r\n                    if (key === 'pool') {\r\n                        return;\r\n                    }\r\n                    if (typeof value === 'object' && value !== null) {\r\n                        if (cache.indexOf(value) !== -1) {\r\n                            // Circular reference found, discard key\r\n                            return;\r\n                        }\r\n                        cache.push(value);\r\n                    }\r\n                    return value;\r\n                });\r\n                cache = null;\r\n                $window.localStorage.setItem(name, json);\r\n            } catch (e) {\r\n                console.log('LocalStorage.set.error serializing', name, value, e);\r\n            }\r\n        };\r\n\r\n        LocalStorage.get = function (name) {\r\n            var value = null;\r\n            if ($window.localStorage[name] !== undefined) {\r\n                try {\r\n                    value = JSON.parse($window.localStorage[name]);\r\n                } catch (e) {\r\n                    console.log('LocalStorage.get.error parsing', name, e);\r\n                }\r\n            }\r\n            return value;\r\n        };\r\n\r\n        LocalStorage.delete = function (name) {\r\n            $window.localStorage.removeItem(name);\r\n        };\r\n\r\n        LocalStorage.on = function (name) {\r\n            var deferred = $q.defer();\r\n            var i, timeout = Cookie.TIMEOUT;\r\n            function storageEvent(e) {\r\n                // console.log('LocalStorage.on', name, e);\r\n                clearTimeout(i);\r\n                if (e.originalEvent.key == name) {\r\n                    try {\r\n                        var value = JSON.parse(e.originalEvent.newValue); // , e.originalEvent.oldValue\r\n                        deferred.resolve(value);\r\n                    } catch (e) {\r\n                        console.log('LocalStorage.on.error parsing', name, e);\r\n                        deferred.reject('error parsing ' + name);\r\n                    }\r\n                }\r\n            }\r\n            angular.element($window).on('storage', storageEvent);\r\n            i = setTimeout(function () {\r\n                deferred.reject('timeout');\r\n            }, timeout);\r\n            return deferred.promise;\r\n        };\r\n\r\n    } else {\r\n        console.log('LocalStorage.unsupported switching to cookies');\r\n        LocalStorage.set = Cookie.set;\r\n        LocalStorage.get = Cookie.get;\r\n        LocalStorage.delete = Cookie.delete;\r\n        LocalStorage.on = Cookie.on;\r\n\r\n    }\r\n\r\n    return LocalStorage;\r\n}]);\r\napp.factory('WebWorker', ['$q', '$http', function ($q, $http) {\r\n    var isWebWorkerSupported = (typeof (Worker) !== \"undefined\");\r\n    if (!isWebWorkerSupported) {\r\n        window.Worker = function () {\r\n            function Worker(src) {\r\n                var self = this;\r\n                $http.get(src, { transformResponse: function (d, h) { return d } }).then(function success(response) {\r\n                    try {\r\n                        eval('self.o = function(){ function postMessage(e) { self.onmessage({data:e}); }\\n ' + response.data + ' };');\r\n                        self.object = new self.o();\r\n                        self.object.postMessage = function (e) {\r\n                            self.onmessage({ data: e });\r\n                        }\r\n                    } catch (e) {\r\n                        console.log(\"Worker error \", e);\r\n                    }\r\n                }, function error(response) {\r\n                    console.log(\"Worker not found\");\r\n                });\r\n            }\r\n            Worker.prototype = {\r\n                onmessage: function (e) {\r\n                    console.log('Worker not implemented');\r\n                },\r\n                postMessage: function (e) {\r\n                    this.object.onmessage({ data: e });\r\n                }\r\n            }\r\n            return Worker;\r\n        }();\r\n    }\r\n    function WebWorker(src) {\r\n        var self = this;\r\n        this.callbacks = {};\r\n        this.id = 0;\r\n        this.worker = new Worker(src);\r\n        this.worker.onmessage = function (e) {\r\n            self.onmessage(e);\r\n        };\r\n    }\r\n    WebWorker.prototype = {\r\n        parse: function (e) {\r\n            return JSON.parse(e.data);\r\n        },\r\n        stringify: function (data) {\r\n            return JSON.stringify(data);\r\n        },\r\n        onmessage: function (e) {\r\n            var data = this.parse(e);\r\n            var deferred = this.callbacks[data.id];\r\n            if (data.status !== -1) {\r\n                deferred.resolve(data);\r\n            } else {\r\n                deferred.reject(data);\r\n            }\r\n            delete this.callbacks[data.id];\r\n        },\r\n        post: function (data) {\r\n            var deferred = $q.defer();\r\n            data.id = this.id;\r\n            this.callbacks[this.id.toString()] = deferred;\r\n            this.id++;\r\n            this.worker.postMessage(this.stringify(data));\r\n            return deferred.promise;\r\n        },\r\n    };\r\n    WebWorker.isSupported = isWebWorkerSupported;\r\n    return WebWorker;\r\n}]);\r\napp.factory('$httpAsync', ['$q', '$http', function ($q, $http) {\r\n    var isWebWorkerSupported = (typeof (Worker) !== \"undefined\");\r\n    if (!isWebWorkerSupported) {\r\n        return $http;\r\n    }\r\n    var worker = new Worker('/Scripts/app/workers/http.js');\r\n    var callbacks = {};\r\n    var id = 0;\r\n    var lowercase = function (string) { return isString(string) ? string.toLowerCase() : string; };\r\n    var trim = function (value) {\r\n        return isString(value) ? value.trim() : value;\r\n    };\r\n    function $httpAsync(options) {\r\n        var deferred = $q.defer();\r\n        var wrap = getDefaults(options);\r\n        wrap.id = id.toString();\r\n        // console.log('wrap', wrap);\r\n        /*\r\n        var xsrfValue = urlIsSameOrigin(config.url)\r\n            ? $$cookieReader()[config.xsrfCookieName || defaults.xsrfCookieName]\r\n            : undefined;\r\n        if (xsrfValue) {\r\n          reqHeaders[(config.xsrfHeaderName || defaults.xsrfHeaderName)] = xsrfValue;\r\n        }\r\n        $httpBackend(config.method, url, reqData, done, reqHeaders, config.timeout,\r\n            config.withCredentials, config.responseType);\r\n        */\r\n        callbacks[wrap.id] = deferred;\r\n        id++;\r\n        worker.postMessage($httpAsync.stringify(wrap));\r\n        return deferred.promise;\r\n    }\r\n    $httpAsync.get = function (url, config) {\r\n        return $httpAsync(angular.extend({}, config || {}, {\r\n            method: 'GET',\r\n            url: url\r\n        }));\r\n    };\r\n    $httpAsync.delete = function (url, config) {\r\n        return $httpAsync(angular.extend({}, config || {}, {\r\n            method: 'DELETE',\r\n            url: url\r\n        }));\r\n    };\r\n    $httpAsync.head = function (url, config) {\r\n        return $httpAsync(angular.extend({}, config || {}, {\r\n            method: 'HEAD',\r\n            url: url\r\n        }));\r\n    };\r\n    $httpAsync.post = function (url, data, config) {\r\n        return $httpAsync(angular.extend({}, config || {}, {\r\n            method: 'POST',\r\n            data: data,\r\n            url: url\r\n        }));\r\n    };\r\n    $httpAsync.put = function (url, data, config) {\r\n        return $httpAsync(angular.extend({}, config || {}, {\r\n            method: 'PUT',\r\n            data: data,\r\n            url: url\r\n        }));\r\n    };\r\n    $httpAsync.patch = function (url, data, config) {\r\n        return $httpAsync(angular.extend({}, config || {}, {\r\n            method: 'PATCH',\r\n            data: data,\r\n            url: url\r\n        }));\r\n    };\r\n    $httpAsync.parse = function (e) {\r\n        return JSON.parse(e.data);\r\n    };\r\n    $httpAsync.stringify = function (data) {\r\n        return JSON.stringify(data);\r\n    };\r\n    $httpAsync.isSupported = isWebWorkerSupported;\r\n    worker.onmessage = function (e) {\r\n        var wrap = $httpAsync.parse(e);\r\n        // console.log('onmessage', wrap);\r\n        var deferred = callbacks[wrap.id];\r\n        var status = wrap.status >= -1 ? wrap.status : 0;\r\n        var getter = headersGetter(wrap.response.headers);\r\n        (isSuccess(status) ? deferred.resolve : deferred.reject)({\r\n            data: wrap.response.data, // !!!! JSON.parse(wrap.response.data),\r\n            headers: getter,\r\n            status: wrap.response.status,\r\n            statusText: wrap.response.statusText,\r\n            config: wrap.config,\r\n        });\r\n        delete callbacks[wrap.id];\r\n    }\r\n    return $httpAsync;\r\n    function isSuccess(status) {\r\n        return 200 <= status && status < 300;\r\n    }\r\n    function createMap() {\r\n        return Object.create(null);\r\n    }\r\n    function isString(value) { return typeof value === 'string'; }\r\n    function parseHeaders(headers) {\r\n        var parsed = createMap(), i;\r\n        function fillInParsed(key, val) {\r\n            if (key) {\r\n                parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\r\n            }\r\n        }\r\n        if (isString(headers)) {\r\n            var a = headers.split('\\n');\r\n            for (var j = 0; j < a.length; j++) {\r\n                var line = a[j];\r\n                i = line.indexOf(':');\r\n                fillInParsed(lowercase(trim(line.substr(0, i))), trim(line.substr(i + 1)));\r\n            }\r\n        } else if (isObject(headers)) {\r\n            for (var p in headers) {\r\n                fillInParsed(lowercase(p), trim(headers[p]));\r\n            }\r\n        }\r\n        return parsed;\r\n    }\r\n    function headersGetter(headers) {\r\n        var headersObj;\r\n        return function (name) {\r\n            if (!headersObj) headersObj = parseHeaders(headers);\r\n            if (name) {\r\n                var value = headersObj[lowercase(name)];\r\n                if (value === void 0) {\r\n                    value = null;\r\n                }\r\n                return value;\r\n            }\r\n            return headersObj;\r\n        };\r\n    }\r\n    function getDefaults(options) {\r\n        var defaults = {\r\n            method: 'GET',\r\n            withCredentials: false,\r\n            responseType: 'json',\r\n            headers: {},\r\n            config: {}\r\n        }\r\n        defaults.withCredentials = $http.defaults.withCredentials;\r\n        angular.extend(defaults.headers, $http.defaults.headers.common);\r\n        var method = (options.method || defaults.method).toLowerCase();\r\n        if ($http.defaults.headers[method]) {\r\n            angular.extend(defaults.headers, $http.defaults.headers[method]);\r\n        }\r\n        // console.log('defaults', $http.defaults);\r\n        // defaults = angular.extend(defaults, $http.defaults);        \r\n        /*\r\n    method{string}:                     HTTP method (e.g. 'GET', 'POST', etc)\r\n    url:{string}:                       Absolute or relative URL of the resource that is being requested.\r\n    params:{Object.<string|Object>}:    Map of strings or objects which will be serialized with the paramSerializer and appended as GET parameters.\r\n    \r\n    data:{string|Object}:               Data to be sent as the request message data.\r\n    headers:{Object}:                   Map of strings or functions which return strings representing HTTP headers to send to the server. If the return value of a function is null, the header will not be sent. Functions accept a config object as an argument.\r\n    \r\n    xsrfHeaderName:{string}:            Name of HTTP header to populate with the XSRF token.\r\n    xsrfCookieName:{string}:            Name of cookie containing the XSRF token.\r\n    transformRequest:{function(data, headersGetter)|Array.<function(data, headersGetter)>}:         transform function or an array of such functions. The transform function takes the http request body and headers and returns its transformed (typically serialized) version. See Overriding the Default Transformations\r\n    \r\n    transformResponse:{function(data, headersGetter, status)|Array.<function(data, headersGetter, status)>}:    transform function or an array of such functions. The transform function takes the http response body, headers and status and returns its transformed (typically deserialized) version. See Overriding the Default TransformationjqLiks\r\n    \r\n    paramSerializer:{string|function(Object<string,string>):string}:        A function used to prepare the string representation of request parameters (specified as an object). If specified as string, it is interpreted as function registered with the $injector, which means you can create your own serializer by registering it as a service. The default serializer is the $httpParamSerializer; alternatively, you can use the $httpParamSerializerJQLike\r\n    \r\n    cache:{boolean|Cache}:              If true, a default $http cache will be used to cache the GET request, otherwise if a cache instance built with $cacheFactory, this cache will be used for caching.\r\n    \r\n    timeout:{number|Promise}:           timeout in milliseconds, or promise that should abort the request when resolved.\r\n    withCredentials:{boolean}:          whether to set the withCredentials flag on the XHR object. See requests with credentials for more information.\r\n    \r\n    responseType:{string}:              see XMLHttpRequest.responseType.\r\n        */\r\n        options ? options = angular.extend(defaults, options) : defaults;\r\n        return options;\r\n    }\r\n}]);\n/*global angular */\r\n\r\napp.controller('RootCtrl', ['$scope', '$route', '$location', 'Config', function ($scope, $route, $location, Config) {\r\n    console.log('RootCtrl');\r\n    $scope.config = Config;\r\n}]);\r\n\r\napp.controller('HomeCtrl', ['$scope', '$route', '$location', function ($scope, $route, $location) {\r\n    console.log('HomeCtrl');\r\n}]);\r\n\r\napp.controller('AboutCtrl', ['$scope', '$route', '$location', function ($scope, $route, $location) {\r\n    console.log('AboutCtrl');\r\n}]);\r\n\r\napp.controller('ContactCtrl', ['$scope', '$route', '$location', function ($scope, $route, $location) {\r\n    console.log('ContactCtrl');\r\n}]);\r\n"],"sourceRoot":"/source/"}